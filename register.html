<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christ University</title>
    <link href="index.css"  rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cambay&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        body{
            overflow-y: hidden;
        }
        form{
            margin-top: 7%;
            margin-bottom:50% ;
        }
        input[type=password]{
            width: 100%;
            margin: 1px auto;
            padding: 5px 7px;
        }
        input[type=submit]{
            background-color: #0d2e75;
            color: white;
            border: none;
            width: 40%;
            font-size: 14px;
            margin: 5px 30% 0 30%;
            padding: 10px 17px;
            border-radius: 20px;
        }
        p{
            font-size: 15px;
            color: #0d2e75;
            font-family: 'cambay';
            font-weight: bold;
        }
        @media only screen and (max-width: 900px){
        form{
            width: 80%;
            margin-top: 25%;
        }
}
    </style>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="https://cis-india.org/Christuniversitylogocolour.jpg/image_preview" alt="" width="200" height="60" class="d-inline-block align-text-top">
          </a>
        <div >
            <a href="register.html" class="a">Register</a>
            <a href="login.html" class="a">Login</a>
            <a href="index.html" class="a">Feedback</a>
        </div>
        </div>
      </nav>

      <form action="index.html" onsubmit="return validate1()">
        <input type="text" id="email" placeholder="Email ID"><br>
        <span></span><br>
        <input type="password" id="password1" onkeyup="return pass()" placeholder="Password"><br>
        <span></span><br>
        <input type="password" id="password2"placeholder="Re-enter password"><br>
        <span></span><br><br>
        <p>Already have an account? <a href="login.html">Login</a></p>
        <input type="submit" value="Register">
        
    </form>

    <script>
        function pass(){
          var letter = event.which;
          var flag=0;
          const re_pass1=/(?=[a-z])/gm;
          const re_pass2=/(?=[A-Z])/gm;
          const re_pass3=/(?=[0-9])/gm;
          const re_pass4=/(?=.[`~!@#$%^&*()_+=-?.|>,<';":])/gm;
          var span= document.getElementsByTagName("span");
          var inputs=document.getElementsByTagName("input");
          // var x=document.getElementById("password1").value+String.fromCharCode(letter);
          var x=document.getElementById("password1").value;
          span[1].innerText="";

          if(letter==32){
            var z=inputs[1].value.trim();
            inputs[1].value=z;
          }

          if(x.length>7 && x.length<16 ){
            flag+=1;
          }
          if(x.length>15){
            flag+=10;
          }
          if(x.length<4){
            flag-=10;
          }
          if(re_pass1.test(x)){
            flag+=1;
          }
          if(re_pass2.test(x)){
            flag+=1;
          }
          if(re_pass3.test(x)){
            flag+=1;
          }
          if(re_pass4.test(x)){
            flag+=1;
          }

          if(flag>0 && flag<4){
            span[1].innerText="Weak password.";
          }else if(flag>3 && flag<5){
            span[1].innerText="Average password.";
            span[1].style.color="orange";
          }else if(flag>10){
            span[1].innerText="Password too long.";
            span[1].style.color="red";
          }else if(flag<0){
            span[1].innerText="Password too short.";
            span[1].style.color="red";
          }else{
            span[1].innerText="Strong password.";
            span[1].style.color="green";
          }
        }


        function validate1(){
            var email=document.getElementById('email').value.trim();
            var password1=document.getElementById('password1').value.trim();
            var password2=document.getElementById('password2').value.trim();

            var span= document.getElementsByTagName("span");
            var inputs=document.getElementsByTagName("input");
            var flag=0;

            const re_mail=/^([A-Za-z\.]{3,})@christuniversity\.((in|com))$/;
            const re_pass1=/(?=[a-z])/gm;
            const re_pass2=/(?=[A-Z])/gm;
            const re_pass3=/(?=[0-9])/gm;
            const re_pass4=/(?=.[`~!@#$%^&*()_+=-?.|>,<';":])/gm;

            // VALIDATE EMAIL 
            if(re_mail.test(email)){
                span[0].innerText="";
                inputs[0].style.border="1px solid black";
                flag+=1;
            }else{
                span[0].innerText="Please enter a official email";
                span[0].style.color="red";
                inputs[0].style.border="3px solid red";
            }
            // VALIDATE PASSWORD asAS12!@
            if(password1.length==0 | password1.length<8 | password1.length>15 ){
                span[1].innerText="Password must contain 8 to 15 characters\n(Use minimum of 1 lower case letter, 1 upper case letter, 1 numeric character and 1 special character)";
                span[1].style.color="red";
                inputs[1].style.border="3px solid red";
            }else{
              var flag1=0;
              span[1].innerText="";
              var x=span[1].innerText;

                if(re_pass1.test(password1)){
                  flag1+=1;
                }else{
                  x=span[1].innerText;
                  span[1].innerText=x+"Use atleast 1 lowercase letter.";
                }

                if(re_pass2.test(password1)){
                  flag1+=1;
                }else{
                  x=span[1].innerText;
                  span[1].innerText=x+" Use atleast 1 uppercase letter.";
                }

                if(re_pass3.test(password1)){
                  flag1+=1;
                }else{
                  x=span[1].innerText;
                  span[1].innerText=x+" Use atleast 1 digit.";
                }

                if(re_pass4.test(password1)){
                  flag1+=1;
                }else{
                  x=span[1].innerText;
                  span[1].innerText=x+" Use atleast 1 special character";
                }

                // For border color
                if(flag1==4){
                  inputs[1].style.border="1px solid black";
                  flag+=1;
                }else{
                  inputs[1].style.border="3px solid red";
                }
            }
            // VALIDATE RE-PASSWORD
            if(password1==password2){
                span[2].innerText="";
                inputs[2].style.border="1px solid black";
                flag+=1;
            }else{
                span[2].innerText="Please re-enter the same password";
                span[2].style.color="red";
                inputs[2].style.border="3px solid red";
            }
            if(flag==3){
              
                alert("ACCOUNT CREATED SUCCESSFULLY!!!");            
                return true;
            }else{
                return false;
            }
        }

    </script>

</body>
</html>